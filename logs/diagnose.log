2025-12-10 21:31:27,968 - INFO - 开始诊断 Gradio 按钮问题...
2025-12-10 21:31:27,969 - INFO - 
2025-12-10 21:31:27,969 - INFO - ======================================================================
2025-12-10 21:31:27,969 - INFO - 步骤 1: 检查代码结构
2025-12-10 21:31:27,969 - INFO - ======================================================================
2025-12-10 21:31:27,969 - INFO - ✓ with gr.Blocks: True
2025-12-10 21:31:27,969 - INFO - ✓ generate_btn.click: True
2025-12-10 21:31:27,969 - INFO - ✓ [UI] 正在绑定按钮事件: True
2025-12-10 21:31:27,969 - INFO - ✓ [GENERATE]: True
2025-12-10 21:31:27,969 - INFO - ✓ def generate_with_kv_cache: True
2025-12-10 21:31:27,969 - INFO - ✗ demo.queue(): False
2025-12-10 21:31:27,969 - INFO - ✓ demo.launch(): True
2025-12-10 21:31:27,969 - INFO - ======================================================================
2025-12-10 21:31:27,969 - INFO - 步骤 2: 检查运行中的进程
2025-12-10 21:31:27,969 - INFO - ======================================================================
2025-12-10 21:31:28,067 - INFO - ✓ 找到 2 个相关进程:
2025-12-10 21:31:28,067 - INFO -   lhy              46071   0.7  0.3 413928464  26224 s011  S+    9:20PM   0:17.33 /Library/Frameworks/Python.framework/Versions/3.11/Resources/Python.app/Contents/MacOS/Python gpt2_full_model_gradio.py
2025-12-10 21:31:28,067 - INFO -   lhy              46069   0.0  0.0 435299808    416 s011  S+    9:20PM   0:00.01 /bin/bash ./run_gpt2_full.sh
2025-12-10 21:31:28,067 - INFO - ======================================================================
2025-12-10 21:31:28,067 - INFO - 步骤 3: 检查端口占用
2025-12-10 21:31:28,067 - INFO - ======================================================================
2025-12-10 21:31:28,104 - INFO - ✓ 端口 7891 被占用:
2025-12-10 21:31:28,104 - INFO - COMMAND     PID USER   FD   TYPE             DEVICE SIZE/OFF NODE NAME
Cursor    43149  lhy   18u  IPv4 0x19cf004fea6b73ee      0t0  TCP localhost:55019->localhost:7891 (ESTABLISHED)
Python    46071  lhy   17u  IPv4 0xcfb04acce6c2a17e      0t0  TCP localhost:7891 (LISTEN)
Python    46071  lhy   21u  IPv4 0xcd5fa0d12aaf77fb      0t0  TCP localhost:7891->localhost:55019 (ESTABLISHED)

2025-12-10 21:31:28,104 - INFO - ======================================================================
2025-12-10 21:31:28,105 - INFO - 步骤 4: 检查服务器响应
2025-12-10 21:31:28,105 - INFO - ======================================================================
2025-12-10 21:31:28,247 - INFO - ✓ 服务器响应正常: 200
2025-12-10 21:31:28,247 - INFO - ======================================================================
2025-12-10 21:31:28,247 - INFO - 步骤 5: 检查日志文件
2025-12-10 21:31:28,247 - INFO - ======================================================================
2025-12-10 21:31:28,250 - INFO - ✓ 日志文件存在，共 2953 行
2025-12-10 21:31:28,250 - INFO - ✗ [UI] 正在绑定按钮事件: 未找到
2025-12-10 21:31:28,250 - INFO - ✗ [UI] ✓ 按钮事件绑定完成: 未找到
2025-12-10 21:31:28,250 - INFO - ✗ [GENERATE]: 未找到
2025-12-10 21:31:28,250 - INFO - ✗ [TEST]: 未找到
2025-12-10 21:31:28,250 - INFO - ✓ Gradio 本地地址: 找到
2025-12-10 21:31:28,251 - INFO - 
2025-12-10 21:31:28,251 - INFO - ======================================================================
2025-12-10 21:31:28,251 - INFO - 诊断结果汇总
2025-12-10 21:31:28,251 - INFO - ======================================================================
2025-12-10 21:31:28,251 - INFO - 代码结构: ✗ 失败
2025-12-10 21:31:28,251 - INFO - 运行进程: ✓ 通过
2025-12-10 21:31:28,251 - INFO - 端口占用: ✓ 通过
2025-12-10 21:31:28,251 - INFO - 服务器响应: ✓ 通过
2025-12-10 21:31:28,251 - INFO - 日志检查: ✓ 通过
2025-12-10 21:31:28,251 - INFO - 
2025-12-10 21:31:28,251 - WARNING - ✗ 部分检查失败，请根据上述结果修复问题
